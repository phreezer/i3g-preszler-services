/*!
* i3g-preszler-services - v0.1.14
* Homepage: http://i-3global.com
* Author: i3Global
* Author URL: http://i-3global.com/
*/

!function(e){"use strict";e.app=e.app||{},e.app.config=e.app.config||{API_SERVER:"/",API_PATH:"wp-json/acf/v2/",API_ENDPOINT:"options/services"},e.serviceServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(e,r){return(e=e||"").length>r&&(e=e.substr(0,r)+"..."),e}function i(r){return e.each(r,function(e,i){r[e].description=n(r[e].description,80)}),r}function s(){var r,n=Q.defer();return r=o.API_SERVER+o.API_PATH+o.API_ENDPOINT,r="json/services.json",console.log("url:",r),e.get(r,function(e){console.log("data",e.services),u=i(e.services),n.resolve(u)}),n.promise}function t(e){console.log("options:",e),o=r(p,e);var n=Q.defer();return null===u?n.resolve(s()):n.resolve(u),n.promise}var c={},o={},p=e.app.config,u=null;return p.API_ENDPOINT="options/services",c.get=t,c.update=function(){return u=null,t()},c}}(jQuery),function(e){"use strict";e.fn.preszlerServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(){e.serviceTemplateLoader().update(c,t).then(function(r){e(o).html(r)})}e.app=e.app||{},e.app.config=e.app.config||{},e.app.config.ASSETS_DIRECTORY=e("script[src*=i3g-preszler-services]").attr("src").replace(/i3g-preszler-services.js.*/gi,"")+"../";var i={},s=e.app.config,t={TEMPLATE_URL:(e.app.config.ASSETS_DIRECTORY||"")+"views/services-cards.html",TEMPLATE:""},c={services:[]},o=this.selector;return this.init=function(){i=r(s,t),n(),console.log("Init Directive"),e.serviceServices().get().then(function(e){console.log("returned from Service:",e),c.services=e,n()})},this.init(),this},e(".preszler-services").preszlerServices()}(jQuery);