/*!
* i3g-preszler-services - v0.1.16
* Homepage: http://i-3global.com
* Author: i3Global
* Author URL: http://i-3global.com/
*/

!function(e){"use strict";e.app=e.app||{},e.app.config=e.app.config||{API_SERVER:"/",API_PATH:"wp-json/acf/v2/",API_ENDPOINT:"options/services"},e.serviceServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(r){return e(r).text()}function i(e,r){return(e=e||"").length>r&&(e=e.substr(0,r)+"..."),e}function t(r){return e.each(r,function(e,t){r[e].description=i(n(r[e].description),80)}),r}function s(){var r,n=Q.defer();return r=p.API_SERVER+p.API_PATH+p.API_ENDPOINT,r="json/services.json",e.get(r,function(e){f=t(e.services),n.resolve(f)}),n.promise}function c(e){p=r(u,e);var n=Q.defer();return null===f?n.resolve(s()):n.resolve(f),n.promise}var o={},p={},u=e.app.config,f=null;return u.API_ENDPOINT="options/services",o.get=c,o.update=function(){return f=null,c()},o}}(jQuery),function(e){"use strict";e.fn.preszlerServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(){e.serviceTemplateLoader().update(c,s).then(function(r){e(o).html(r)})}e.app=e.app||{},e.app.config=e.app.config||{},e.app.config.ASSETS_DIRECTORY=e("script[src*=i3g-preszler-services]").attr("src").replace(/i3g-preszler-services.js.*/gi,"")+"../";var i={},t=e.app.config,s={TEMPLATE_URL:(e.app.config.ASSETS_DIRECTORY||"")+"views/services-cards.html",TEMPLATE:""},c={services:[]},o=this.selector;return this.init=function(){i=r(t,s),n(),e.serviceServices().get().then(function(e){c.services=e,n()})},this.init(),this},e(".preszler-services").preszlerServices()}(jQuery);