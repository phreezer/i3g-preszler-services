/*!
* i3g-preszler-services - v0.1.3
* Homepage: http://i-3global.com
* Author: i3Global
* Author URL: http://i-3global.com/
*/

!function(e){"use strict";e.app=e.app||{},e.app.config=e.app.config||{API_SERVER:"/",API_PATH:"wp-json/acf/v2/",API_ENDPOINT:"options/services"},e.serviceServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(e){return e}function i(){var r,i=Q.defer();return r=t.API_SERVER+t.API_PATH+t.API_ENDPOINT,r="json/services.json",console.log("url:",r),e.get(r,function(e){console.log("data",e.services),p=n(e.services),i.resolve(p)}),i.promise}function s(e){console.log("options:",e),t=r(o,e);var n=Q.defer();return null===p?n.resolve(i()):n.resolve(p),n.promise}var c={},t={},o=e.app.config,p=null;return o.API_ENDPOINT="options/services",c.get=s,c.update=function(){return p=null,s()},c}}(jQuery),function(e){"use strict";e.fn.preszlerServices=function(){function r(r,n){return n=n||{},r=r||{},e.extend(!0,{},r,n)}function n(){e.serviceTemplateLoader().update(t,c).then(function(r){e(o).html(r)})}e.app=e.app||{},e.app.config=e.app.config||{},e.app.config.ASSETS_DIRECTORY=e("script[src*=i3g-preszler-services]").attr("src").replace(/i3g-preszler-services.js.*/gi,"")+"../";var i={},s=e.app.config,c={TEMPLATE_URL:(e.app.config.ASSETS_DIRECTORY||"")+"views/services-cards.html",TEMPLATE:""},t={services:[]},o=this.selector;return this.init=function(){i=r(s,c),n(),console.log("Init Directive"),e.serviceServices().get().then(function(e){console.log("returned from Service:",e),t.services=e,n()})},this.init(),this},e(".preszler-services").preszlerServices()}(jQuery);